\abschnitt{\fiber as building block for higher-level frameworks}

A low-level API enables a rich set of higher-level frameworks that provide
specific syntaxes/semantics suitable for specific domains. As an example, the
following four frameworks are based on the low-level fiber switching API of
\bcontext\cite{bcontext} (implements the API of this proposal).

\uabschnitt{\bcoroutine}\cite{bcoroutine2} implements \bfs{asymmetric coroutines}
\cpp{coroutine<>::push_type} and\\
\cpp{coroutine<>::pull_type}, providing a
unidirectional transfer of data. These stackful coroutines are only used in
pairs. When \cpp{coroutine<>::push_type} is explicitly
instantiated, \cpp{coroutine<>::pull_type} is synthesized and passed as
parameter into the coroutine function. In the
example below, \cpp{coroutine<>::push_type} (variable \cpp{writer}) provides the
resume operation, while \cpp{coroutine<>::pull_type} (variable \cpp{in})
represents the suspend operation. Inside the lambda,\cpp{in.get()}
pulls strings provided by \cpp{coroutine<>::push_type}'s output iterator support.
\cppf{bcoroutine_ex}

\uabschnitt{\synca}\cite{synca} (by Grigory Demchenko) is a small, efficient
library to perform asynchronous operations in synchronous manner. The main
features are a \bfs{GO-like} syntax, support for transferring execution context
explicitly between different thread pools or schedulers (portals/teleports) and
asynchronous network support.
\cppf{synca_ex}

The code itself looks like synchronous invocations while internally it uses
asynchronous scheduling.

\uabschnitt{\bfiber}\cite{bfiber} implements \bfs{user-land threads} and combines
fibers with schedulers (scheduler-algorithms are customization points). The API
is modelled after the \thread-API and contains objects like
\cpp{future}, \cpp{mutex},\\
\cpp{condition_variable} ...
\cppf{bfiber_ex}

\uabschnitt{Facebook's \fbfibers}\cite{fbfiber} is an asynchronous C++ framework
using \bfs{user-land threads} for parallelism. In contrast to \bfiber,
\fbfibers\xspace exposes the scheduler and permits integration with various
event dispatching libraries.
\cppf{fbfiber_ex}

\fbfibers\xspace is used in many critical applications at Facebook for instance
in \fbmcrouter\cite{fbmcrouter} and some other Facebook services/libraries like
ServiceRouter (routing framework for \fbthrift\cite{fbthrift}), Node API (graph
ORM API for graph databases) ...\\

\uabschnitt{Bloomber's \bbquantum}\cite{bbquantum} is a full-featured and
powerful C++ framework that allows users to dispatch units of work (a.k.a.
tasks) as coroutines and execute them concurrently using the 'reactor' pattern.
Main features are support for streaming futures which allows faster processing
of large data sets, task prioritization, fast pre-allocated memory pools and
parallel forEach and mapReduce functions.
\cppf{bbquantum}

\bbquantum\xspace is used in large projects at Bloomberg.

\uabschnitt{Habanero Extreme Scale Software Research Project\cite{habanero}}
provides a task-based parallel programming model via its \hclib\cite{hclib}.
The runtime provides work-stealing, finish-async, parallel-for and
future-promise parallel programming patterns. The library is not an exascale
programming system itself, but it manages intra-node resources and schedules
components within an exascale programming system.

\zs{As shown in this section a low-level API can act as building block for a
rich set of high-level frameworks designed for specific application domains
that require different aspects of design, semantics and syntax.}
